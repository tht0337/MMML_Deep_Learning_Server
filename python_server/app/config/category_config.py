# ================================
# CategoryConfig (Java ENUM ìŠ¤íƒ€ì¼)
# ================================

class CategoryConfig:

    # ğŸ”’ ì¹´í…Œê³ ë¦¬ ENUM (13ê°œ ê³ ì •)
    CATEGORIES = [
        "ì‹ë¹„",
        "ì¹´í˜",
        "ì‡¼í•‘",
        "ìƒí™œ",
        "êµí†µ",
        "ì˜ë£Œ",
        "êµìœ¡",
        "ì—¬ê°€/ì·¨ë¯¸",
        "ë°˜ë ¤ë™ë¬¼",
        "ê³ ì •ë¹„/êµ¬ë…",
        "ê¸ˆìœµ/ì´ì²´",
        "ì„¸ê¸ˆ/ê³µê³µìš”ê¸ˆ",
        "ê¸°íƒ€"
    ]

    # ğŸ” ì¹´í…Œê³ ë¦¬ ë§¤ì¹­ í‚¤ì›Œë“œ (ì •ê·œí™”ìš©)
    CATEGORY_KEYWORDS = {
        "ì‹ë¹„": ["ì‹ë¹„", "ì‹ë‹¹", "ë°¥", "ìš”ê¸°ìš”", "ë°°ë‹¬", "ì¹˜í‚¨", "ì´ˆë°¥", "í•œì‹", "ë„ì‹œë½"],
        "ì¹´í˜": ["ì¹´í˜", "ì»¤í”¼", "coffee", "ìŠ¤íƒ€ë²…ìŠ¤", "ì´ë””ì•¼", "íˆ¬ì¸"],
        "ì‡¼í•‘": ["ì¿ íŒ¡", "ë¬´ì‹ ì‚¬", "ì§€ê·¸ì¬ê·¸", "ë°±í™”ì ", "ì‡¼í•‘", "11ë²ˆê°€"],
        "ìƒí™œ": ["gs25", "cu", "ì˜¬ë¦¬ë¸Œì˜", "ìƒí™œ", "ë§ˆíŠ¸", "í™ˆí”ŒëŸ¬ìŠ¤"],
        "êµí†µ": ["íƒì‹œ", "ì¹´ì¹´ì˜¤t", "êµí†µ", "ì§€í•˜ì² ", "ë²„ìŠ¤", "ktx", "ì½”ë ˆì¼"],
        "ì˜ë£Œ": ["ë³‘ì›", "ì˜ì›", "ì•½êµ­", "ì¹˜ê³¼", "ë‚´ê³¼", "ê²€ì§„", "ê±´ê°•"],
        "êµìœ¡": ["êµìœ¡", "í•™ì›", "ë„ì„œ", "yes24", "ë¬¸ê³ ", "ì„œì "],
        "ì—¬ê°€/ì·¨ë¯¸": ["cgv", "ì˜í™”", "í—¬ìŠ¤", "ì·¨ë¯¸", "ê²Œì„", "ë…¸ë˜ë°©", "ìŠ¤íŒ€"],
        "ë°˜ë ¤ë™ë¬¼": ["í«", "ë™ë¬¼ë³‘ì›", "ì‚¬ë£Œ", "ì• ê²¬", "ê°„ì‹", "ë°˜ë ¤"],
        "ê³ ì •ë¹„/êµ¬ë…": ["ë³´í—˜", "ë Œíƒˆ", "ê´€ë¦¬ë¹„", "ì›”ì„¸", "êµ¬ë…", "í†µì‹ ë¹„", "ì •ê¸°"],
        "ê¸ˆìœµ/ì´ì²´": ["ì´ì²´", "ì†¡ê¸ˆ", "ì€í–‰", "atm", "ì¹´ì¹´ì˜¤ë±…í¬", "í† ìŠ¤"],
        "ì„¸ê¸ˆ/ê³µê³µìš”ê¸ˆ": ["ì„¸ê¸ˆ", "ì§€ë°©ì„¸", "ì£¼ë¯¼ì„¸", "ì „ê¸°ìš”ê¸ˆ", "ìˆ˜ë„ìš”ê¸ˆ", "ê³µê³µ"],
        "ê¸°íƒ€": []
    }

    # ğŸ’¡ ì¹´í…Œê³ ë¦¬ ì •ê·œí™” í•¨ìˆ˜
    @classmethod
    def normalize(cls, text: str) -> str:
        if not isinstance(text, str):
            return "ê¸°íƒ€"

        t = text.replace(" ", "").lower()

        for category, keywords in cls.CATEGORY_KEYWORDS.items():
            for key in keywords:
                if key.lower() in t:
                    return category

        return "ê¸°íƒ€"

    # ğŸ”¥ ë£° ê¸°ë°˜ ë¶„ë¥˜ìš© (predict ë‹¨ê³„ì—ì„œ ì‚¬ìš©)
    @classmethod
    def rule_based(cls, merchant: str, memo: str = "") -> str | None:
        text = (merchant + " " + memo).lower()

        for category, keywords in cls.CATEGORY_KEYWORDS.items():
            for key in keywords:
                if key.lower() in text:
                    return category

        return None  # ë£°ì— ì—†ë‹¤ë©´ None ë°˜í™˜ â†’ GRUë¡œ ë¶„ë¥˜
